<% unless order_account.pending? %>
  <h3 class="no-margin padding-three"> Documents et informations à fournir </h3>
<% end %>

<div class="form-order-div">

    <% if order_account.pending? %>
      <div class='align-center'>
        <p><strong>Tous les documents ont été fournis avec succès</strong></p>
      </div>
    <% end %>

    <% order_account.order_documents.select { |od| od.document.format == 'text' }.each do |order_document| %>
      <% if order_document.document_input.blank? %>
        <%= simple_form_for [order_document.order, order_account, order_document], html: { id: order_document } do |f| %>
          <%= f.error_notification %>
          <div class="document-name d-inline-block bold"><%= order_document.document.name %> :</div>
          <div class="insert-document modal-update" data-controller="loading-spinner">
            <%= f.input :document_input, label: false, input_html: { class:'doc-input' } %>
            <div id=<%= dom_id order_document %> class='error'></div>
            <div class="lds-dual-ring display-none" data-loading-spinner-target='spinner'></div>
            <%= f.submit "Valider", class:'file optional btn-principal small margin-top-two', data: {"loading-spinner-target":"btn", action:"click->loading-spinner#load"} %>
          </div>
        <% end %>
      <% else %>
        <div>
          <span class='document-name d-inline-block bold'><%= order_document.document.name %> : </span>
          <span><%= order_document.document_input %></span>
        </div>
      <% end %>
    <% end %>

    <% order_account.order_documents.select { |od| od.document.format == 'file' }.each do |order_document| %>
      <% if order_document.document_file.attached?  %>
        <div>
          <span class='document-name d-inline-block bold'><%= order_document.document.name %> : </span>
          <span><%= order_document.document_file.filename %></span>
        </div>
      <% else %>
        <%= simple_form_for [order_document.order, order_account, order_document], html: { id: order_document } do |f| %>
          <%= f.error_notification %>
          <div class="document-name d-inline-block bold"><%= order_document.document.name %> :</div>
          <div class="insert-document modal-update" data-controller="loading-spinner">
            <div data-check-document-target='infoDiv'></div>
            <div class="document-btn-and-name">
              <%= f.input :document_file,
                          label: false,
                          as: :file,
                          input_html:{
                            accept: '.png, .jpg, .jpeg, .pdf'
                          },
                          label_html:{
                            class:'label-document-input d-inline-block margin-bottom-two',
                            :'data-check-document-target' => 'documentForm'
                          }
                %>
              <div class="file-name" data-add-file-target="fileNameDiv"></div>
              <div id=<%= dom_id order_document %> class='error'></div>
            </div>
            <div class="lds-dual-ring display-none" data-loading-spinner-target='spinner'></div>
            <%= f.submit "Valider", class:'file optional btn-principal small margin-top-two', data: {"loading-spinner-target":"btn", action:"click->loading-spinner#load"} %>
          </div>
        <% end %>
      <% end %>
    <% end %>
</div>
